BACKUP_DIR="$HOME/sync/backup" 

restore_dir() {
	local src="$1"
	local dest="$2"
	if [ -d "$src" ]; then
		echo "Restoring $src to $dest"
		cp -r "$src" "$dest"
	else
		echo "Directory $src not found in the backup"
	fi
}

restore_file() {
	local src="$1"
	local dest="$2"
	if [ -f "$src" ]; then
		echo "Restoring $src to $dest"
		cp "$src" "$dest"
	else
		echo "File $src not found in the backup"
	fi
}

echo "Starting restoration process..."

sudo restore_dir "$BACKUP_DIR/bluetooth" "/var/lib/bluetooth"

sudo restore_dir "$BACKUP_DIR/network-connections" "/etc/NetworkManager/system-connections"

restore_dir "$BACKUP_DIR/ssh-keys" "$HOME/.ssh"

restore_dir "$BACKUP_DIR/firefox-data" "$HOME/.mozilla/firefox"

restore_dir "$BACKUP_DIR/thunderbird-data" "$HOME/.thunderbird"

restore_file "$BACKUP_DIR/fstab" "/etc/fstab"

restore_dir "$BACKUP_DIR/tmuxp-sessions" "$XDG_CONFIG_HOME/tmuxp"

restore_file "$BACKUP_DIR/zhistory" "$ZDOTDIR/zhistory"

restore_dir "$BACKUP_DIR/gnupg" "$HOME/.gnupg"

restore_dir "$BACKUP_DIR/aws" "$HOME/.aws"

restore_dir "$BACKUP_DIR/kube" "$HOME/.kube"

restore_dir "$BACKUP_DIR/password-store" "$HOME/.password-store"

restore_dir "$BACKUP_DIR/claude" "$HOME/.claude"

restore_dir "$BACKUP_DIR/docker" "$HOME/.docker"

restore_dir "$BACKUP_DIR/cargo" "$HOME/.cargo"

restore_dir "$BACKUP_DIR/terraform.d" "$HOME/.terraform.d"

restore_dir "$BACKUP_DIR/pulumi" "$HOME/.pulumi"

restore_file "$BACKUP_DIR/claude.json" "$HOME/.claude.json"

restore_file "$BACKUP_DIR/env" "$HOME/.env"

echo "Restoration completed."

echo "Some changes may require a system restart or re-login to take effect."
