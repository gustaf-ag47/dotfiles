#!/bin/bash
set -euo pipefail

# File manager launcher with fallbacks

# Try terminal-based file managers first
if command -v lf &>/dev/null; then
    # Check for terminal emulator
    if command -v alacritty &>/dev/null; then
        exec alacritty -e lf "$@"
    elif command -v kitty &>/dev/null; then
        exec kitty -e lf "$@"
    elif command -v foot &>/dev/null; then
        exec foot lf "$@"
    else
        # Fallback to current terminal if available
        exec lf "$@"
    fi
elif command -v ranger &>/dev/null; then
    if command -v alacritty &>/dev/null; then
        exec alacritty -e ranger "$@"
    elif command -v kitty &>/dev/null; then
        exec kitty -e ranger "$@"
    else
        exec ranger "$@"
    fi
elif command -v nnn &>/dev/null; then
    if command -v alacritty &>/dev/null; then
        exec alacritty -e nnn "$@"
    elif command -v kitty &>/dev/null; then
        exec kitty -e nnn "$@"
    else
        exec nnn "$@"
    fi
# GUI file managers as fallback
elif command -v thunar &>/dev/null; then
    exec thunar "$@"
elif command -v nautilus &>/dev/null; then
    exec nautilus "$@"
elif command -v dolphin &>/dev/null; then
    exec dolphin "$@"
else
    echo "Error: No file manager found" >&2
    echo "Please install: lf, ranger, nnn, thunar, nautilus, or dolphin" >&2
    exit 1
fi
